"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[4481],{28812:(e,t,n)=>{n.d(t,{E:()=>s});var r=n(30395),a=n.n(r),o=n(22155),l=n(96878),i=n(27504),c=n(36599),u=o.createElement;function s(e){var t=e.className,n=e.users,r=e.selected,o=e.onClick,s=e.checkIsDisabled,d=e.disabledTooltip;return null!=n&&n.length?u("ul",{className:a()("flex flex-col overflow-hidden rounded-16 border border-border-subtlest-secondary text-text-primary",t),role:"listbox"},n.map((function(e,t){return u(i.A,{key:e.username,condition:(null==s?void 0:s(e))&&!!d,wrapper:function(e){return u(c.S,{content:d},u("div",null,e))}},u(l.u,{user:e,className:{container:a()("cursor-pointer p-3",null!=s&&s(e)?"pointer-events-none opacity-64":"cursor-pointer",t===r&&"bg-theme-active")},imageSize:"large",tag:"li",onClick:function(){return o(e)},"aria-selected":t===r,role:"option",disableTooltip:!0,showDescription:!1}))}))):null}},24481:(e,t,n)=>{n.d(t,{A:()=>Y});var r=n(7527),a=n(22155),o=n(30395),l=n.n(o),i=n(17847),c=n(26540),u=n(99277),s=n(75193),d=n(83448),p=n(53823),f=n(19505),v=n(98093),m=n(6948),h=n(28812),g=n(54883),b=a.createElement;function y(e){var t,n=e.query,r=e.mentions,a=void 0===r?[]:r,o=e.selected,l=void 0===o?-1:o,i=e.offset,c=void 0===i?[0,0]:i,u=e.onMentionClick,s=e.appendTo,d=e.elementRef,p=e.onClickOutside;if(g.zS)return null;var f=(0,v.A)(c,2),y=f[0],w=f[1],x=64*a.length;return b(m.BaseTooltip,{appendTo:s||(null===globalThis||void 0===globalThis||null===(t=globalThis.document)||void 0===t?void 0:t.body)||"parent",content:b(h.E,{className:"w-70",users:void 0!==n&&a,selected:l,onClick:u}),offset:[y,-1*(w+x+26)],onClickOutside:p,interactive:!0,container:{className:"shadow",paddingClassName:"p-0",roundedClassName:"rounded-16",bgClassName:"bg-accent-pepper-subtlest"},reference:d,showArrow:!1,placement:"top-start",visible:void 0!==n})}var w=n(66007),x=a.createElement;function k(e){var t=e.uploadingCount,n=e.uploadedCount;return 0===t?x("span",{className:"hidden laptop:flex"},"Attach images by dragging & dropping"):x(a.Fragment,null,"Uploading in progress",t>1?" (".concat(n,"/").concat(t,")"):"")}var A=n(50421),O=n(27504),C=n(11196),j=n(14243),E=n(91201),S=n(99604),N=n(37774),P=n(51722),M=a.createElement;const I=function(e){var t=e.input,n=e.sourceId,r=e.parentSelector,a=e.enabled,o=void 0===a||a,l=(0,E.D)(),i=l.requestMethod,c=l.isCompanion,u=["markdown_preview",t],s=(0,j.I)({queryKey:u,queryFn:function(){return i(S.HL,{content:t,sourceId:n},{requestKey:c?JSON.stringify(u):void 0})},enabled:(null==t?void 0:t.length)>0&&o}).data;return(0,P.X)(u,{enabled:(null==t?void 0:t.length)>0&&o}),M(N.A,{content:null==s?void 0:s.preview,appendTooltipTo:r})};var D=n(68390),T=n(30794),z=n(36780),R=n(97838),L=a.createElement;function U(e){var t=e.isUptoDate,n=e.isUpdating,r=e.className;if(!t&&!n)return null;return L("span",{className:l()("flex flex-row items-center gap-1 px-2 font-bold text-text-tertiary typo-callout",r)},n?L(T.a,null):t?L(z.w,{size:R.lK.Medium}):"",n?"Saving":t?"Saved":"")}var H=n(38638),q=n(80244),V=n(52303),W=n(10715),B=n(3994),K=n(49577),F=n(55059),_=a.createElement,X=function(e){return e.Write="Write",e.Preview="Preview",e}(X||{});function J(e,t){var n=e.className,o=void 0===n?{}:n,v=e.postId,m=e.sourceId,h=e.onSubmit,b=e.onValueUpdate,x=e.initialContent,j=e.textareaProps,E=void 0===j?{}:j,S=e.enabledCommand,N=e.submitCopy,P=e.showMarkdownGuide,M=void 0===P||P,z=e.allowPreview,R=void 0===z||z,L=e.isUpdatingDraft,J=e.showUserAvatar,Y=e.footer,$=e.timeline,Q=e.isLoading,Z=e.disabledSubmit,G=e.maxInputLength,ee=e.onClose,te=!!N,ne=(0,q.Z2)().user,re=(0,W.t)().parentSelector,ae=(0,A.A)().sidebarRendered,oe=(0,a.useRef)(),le=(0,a.useRef)(),ie=(0,a.useState)(X.Write),ce=ie[0],ue=ie[1],se=(0,w.B1)({postId:v,sourceId:m,initialContent:x,onSubmit:h,textareaRef:oe,onValueUpdate:b,enabledCommand:S}),de=se.input,pe=se.query,fe=se.offset,ve=se.selected,me=se.callbacks,he=se.uploadingCount,ge=se.uploadedCount,be=se.onLinkCommand,ye=se.onUploadCommand,we=se.onMentionCommand,xe=se.onApplyMention,ke=se.onCloseMention,Ae=se.checkMention,Oe=se.mentions;(0,a.useImperativeHandle)(t,(function(){return{textareaRef:oe,onMentionCommand:we}}));var Ce=te?d.Mp.Small:d.Mp.XSmall,je=0===he?_(i.x,null):_(T.a,{className:"btn-loader",innerClassName:"before:border-t-accent-cabbage-default after:border-accent-cabbage-default"});return(0,a.useEffect)((function(){var e,t=null==oe||null===(e=oe.current)||void 0===e?void 0:e.value;t&&(0,B.T5)(oe.current,[t.length,t.length])}),[]),_("div",{className:l()("relative flex flex-col rounded-16 bg-surface-float",null==o?void 0:o.container)},!(0,D.hX)(L)&&_(U,{className:"absolute right-3 top-3",isUpdating:L,isUptoDate:x===de}),ee&&_(K.A,{size:d.Mp.Small,className:"absolute right-3 top-2",onClick:ee}),_(O.A,{condition:R,wrapper:function(e){return _(C.j,{shouldMountInactive:!0,onActiveChange:function(e){return ue(e)},className:{header:"px-1",container:l()("min-h-[20.5rem]",null==o?void 0:o.tab)},tabListProps:{className:{indicator:"!w-6"}}},_(C.oz,{label:X.Write},e),_(C.oz,{label:X.Preview,className:"min-h-[11.125rem] p-4"},_(I,{input:de,sourceId:m,parentSelector:re,enabled:R&&X.Preview===ce})))}},_(O.A,{condition:!!$,wrapper:function(e){return _("span",{className:"relative flex flex-col"},_(V.c,{className:"absolute left-8 !h-10 !bg-border-subtlest-tertiary",vertical:!0}),$,e)}},_(O.A,{condition:J,wrapper:function(e){return _("span",{className:"flex w-full flex-row"},_(H.Y3,{size:H.Ov.Large,className:l()("ml-3 mt-3",null==o?void 0:o.profile),user:ne,nativeLazyLoading:!0,fetchPriority:"low"}),e)}},_("span",{className:"relative flex flex-1"},_("textarea",(0,r.A)({rows:11,placeholder:"Share your thoughts"},E,me,{ref:oe,className:l()("flex max-h-commentBox flex-1 bg-transparent placeholder-text-quaternary outline-none typo-body",J?"m-3":"m-4",null==o?void 0:o.input),value:de,onClick:function(){Ae&&Ae()},onDragOver:function(e){return e.preventDefault()},maxLength:G}))),G&&_("div",{className:"m-2 flex justify-end font-bold text-text-tertiary typo-callout"},G-((null==de?void 0:de.length)||0))))),_(y,{elementRef:oe,offset:fe,mentions:Oe,selected:ve,query:pe,onMentionClick:xe,onClickOutside:ke,appendTo:re}),null!=Y?Y:_("span",{className:"flex flex-row items-center gap-3 border-border-subtlest-tertiary p-3 px-4 text-text-tertiary laptop:justify-end laptop:border-t"},!!ye&&_(p.$n,{size:Ce,variant:d.Ak.Tertiary,color:he?f.h.Cabbage:void 0,className:l()("font-normal",he&&"mr-auto text-brand-default"),icon:je,onClick:function(){var e;return null==le||null===(e=le.current)||void 0===e?void 0:e.click()},type:"button"},!ae||te?null:_(k,{uploadingCount:he,uploadedCount:ge})),_("input",{type:"file",className:"hidden",name:"content_upload",ref:le,accept:F.KB,onInput:function(e){return ye(e.currentTarget.files)}}),_(O.A,{condition:ae,wrapper:function(e){return _("span",{className:l()("flex gap-3",!te&&"ml-auto")},e)}},!!be&&_(p.$n,{variant:d.Ak.Tertiary,size:Ce,icon:_(c.q,{secondary:!0}),onClick:be,type:"button"}),!!we&&_(p.$n,{variant:d.Ak.Tertiary,size:Ce,icon:_(u.X,null),onClick:we,type:"button"}),M&&_(p.$n,{variant:d.Ak.Tertiary,size:Ce,icon:_(s.H,null),tag:"a",target:"_blank",rel:"noopener noreferrer",href:g.K4})),te&&_(p.$n,{className:"ml-auto",variant:d.Ak.Primary,color:f.h.Cabbage,type:"submit",disabled:Q||Z||""===de,loading:Q},N)))}const Y=(0,a.forwardRef)(J)},99277:(e,t,n)=>{n.d(t,{X:()=>v});var r,a=n(7527),o=n(22155),l=n(97838);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(null,arguments)}const c=function(e){return o.createElement("svg",i({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),r||(r=o.createElement("path",{d:"M20.25 13.375a3.125 3.125 0 01-5.723 1.738A4 4 0 017.5 12.5v-1a4 4 0 016.501-3.122L14 8.25a.75.75 0 011.493-.102l.007.102v5.125a1.625 1.625 0 003.244.14l.006-.14V9.75a5.25 5.25 0 00-5.034-5.246L13.5 4.5h-3a5.25 5.25 0 00-5.246 5.034l-.004.216v4.5a5.25 5.25 0 005.034 5.246l.216.004h3a.75.75 0 01.102 1.493L13.5 21h-3a6.75 6.75 0 01-6.746-6.513l-.004-.237v-4.5a6.75 6.75 0 016.513-6.746L10.5 3h3a6.75 6.75 0 016.746 6.513l.004.237v3.625zM11.5 9A2.5 2.5 0 009 11.5v1a2.5 2.5 0 105 0v-1A2.5 2.5 0 0011.5 9z",fill:"currentcolor",fillRule:"evenodd"})))};var u,s;function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(null,arguments)}const p=function(e){return o.createElement("svg",d({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),u||(u=o.createElement("defs",null,o.createElement("clipPath",{id:"filled_svg__a"},o.createElement("path",{d:"M9.69 0a6.812 6.812 0 016.807 6.576l.004.235v3.527a3.284 3.284 0 01-5.768 2.148l-.064-.08-.103.103a4.117 4.117 0 01-2.595 1.106l-.227.007a4.135 4.135 0 01-4.135-4.136v-.972A4.135 4.135 0 019.95 5.016l.034.023.005-.016a.974.974 0 01.802-.638l.114-.007c.488 0 .899.362.966.858l.007.115v4.987a1.338 1.338 0 002.67.126l.006-.126V6.81a4.864 4.864 0 00-4.66-4.86l-.205-.005H6.81a4.864 4.864 0 00-4.86 4.66l-.004.205v4.378a4.864 4.864 0 004.66 4.86l.205.005H9.69a.973.973 0 01.115 1.939L9.69 18H6.81a6.812 6.812 0 01-6.806-6.576L0 11.189V6.811A6.812 6.812 0 016.576.004L6.811 0H9.69zM7.744 6.324c-1.21 0-2.19.98-2.19 2.19v.972a2.19 2.19 0 104.379 0v-.972c0-1.21-.98-2.19-2.19-2.19z"})))),s||(s=o.createElement("g",{clipPath:"url(#filled_svg__a)",transform:"translate(3.5 3)"},o.createElement("path",{fill:"currentcolor",d:"M0 0h16.5v18H0V0z"}))))};var f=o.createElement,v=function(e){return f(l.Ay,(0,a.A)({},e,{IconPrimary:c,IconSecondary:p}))}},17847:(e,t,n)=>{n.d(t,{x:()=>f});var r,a=n(7527),o=n(22155),l=n(97838);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(null,arguments)}const c=function(e){return o.createElement("svg",i({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),r||(r=o.createElement("path",{d:"M7.856 4.002L15.872 4c1.783 0 2.43.186 3.082.534.652.349 1.163.86 1.512 1.512.348.652.534 1.299.534 3.082v5.744c0 1.783-.186 2.43-.534 3.082a3.635 3.635 0 01-1.512 1.512c-.652.348-1.299.534-3.082.534H8.128c-1.783 0-2.43-.186-3.082-.534a3.635 3.635 0 01-1.512-1.512c-.33-.618-.514-1.23-.532-2.81L3 9.128c0-1.783.186-2.43.534-3.082a3.635 3.635 0 011.512-1.512c.618-.33 1.23-.514 2.81-.532zm8.268 1.5L8.128 5.5l-.484.005c-1.036.02-1.458.12-1.89.352-.39.209-.688.506-.897.897-.264.494-.357.975-.357 2.374v5.744c0 1.4.093 1.88.357 2.374.209.39.506.688.897.897.494.264.975.357 2.374.357h.236a.757.757 0 01.056-.077l3.413-4.16a1.75 1.75 0 012.336-.339l1.523 1.034a.25.25 0 00.338-.054l3.374-4.345a.75.75 0 01.096-.102v-1.33l-.005-.483c-.02-1.036-.12-1.458-.352-1.89a2.135 2.135 0 00-.897-.897c-.463-.248-.914-.345-2.122-.356zM19.5 12.88l-2.285 2.944a1.75 1.75 0 01-2.365.375l-1.523-1.034a.25.25 0 00-.334.049L10.296 18.5h5.576l.484-.005c1.036-.02 1.458-.12 1.89-.352.39-.209.688-.506.897-.897.264-.494.357-.975.357-2.374V12.88zM8 7a2 2 0 110 4 2 2 0 010-4z",fill:"currentcolor",fillRule:"evenodd"})))};var u;function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(null,arguments)}const d=function(e){return o.createElement("svg",s({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),u||(u=o.createElement("path",{d:"M3.055 16.257l-.007-.07a12.472 12.472 0 01-.042-.807L3 14.872V9.128c0-1.783.186-2.43.534-3.082a3.635 3.635 0 011.512-1.512l.103-.053.171-.082.128-.055.195-.072.25-.075.193-.045.243-.045.185-.026.299-.033.347-.025.255-.011.44-.01L15.873 4c1.783 0 2.43.186 3.082.534.652.349 1.163.86 1.512 1.512.045.085.087.169.127.256l.061.142.083.224.027.087.05.183c.031.126.059.263.082.414l.02.138.033.29.021.275.021.454.008.401.001 5.962c0 1.783-.186 2.43-.534 3.082a3.635 3.635 0 01-1.512 1.512c-.652.348-1.299.534-3.082.534H8.128c-.282 0-.535-.005-.764-.014l-.399-.022-.311-.028-.113-.013a6.012 6.012 0 01-.59-.106l-.294-.084-.13-.046-.146-.06-.175-.08-.16-.081a3.635 3.635 0 01-1.512-1.512 4.325 4.325 0 01-.16-.332l-.038-.09a3.72 3.72 0 01-.188-.635l-.04-.226-.011-.066a7.038 7.038 0 01-.042-.348zM19.5 10.431l-3.47 4.473a.25.25 0 01-.159.094L15.81 15a.249.249 0 01-.118-.042l-1.525-1.035a1.744 1.744 0 00-1.008-.302l-.15.01c-.444.044-.87.259-1.175.628L8.339 18.5h7.533l.484-.005c1.036-.02 1.458-.12 1.89-.352.39-.209.688-.506.897-.897.264-.494.357-.975.357-2.374v-4.441zM8 7a2 2 0 100 4 2 2 0 000-4z",fill:"currentcolor",fillRule:"evenodd"})))};var p=o.createElement,f=function(e){return p(l.Ay,(0,a.A)({},e,{IconPrimary:c,IconSecondary:d}))}},75193:(e,t,n)=>{n.d(t,{H:()=>f});var r,a=n(7527),o=n(22155),l=n(97838);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i.apply(null,arguments)}const c=function(e){return o.createElement("svg",i({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),r||(r=o.createElement("path",{d:"M17 4a4 4 0 014 4v8a4 4 0 01-4 4H7a4 4 0 01-4-4V8a4 4 0 014-4h10zm0 1.5H7A2.5 2.5 0 004.5 8v8A2.5 2.5 0 007 18.5h10a2.5 2.5 0 002.5-2.5V8A2.5 2.5 0 0017 5.5zm-5.62 4.364l.833 4a.75.75 0 11-1.468.306l-.48-2.295-.65.936a.75.75 0 01-1.167.081l-.068-.086-.626-.92-.486 2.287a.75.75 0 01-.788.592l-.101-.014a.75.75 0 01-.578-.89l.85-4a.75.75 0 011.353-.267l1 1.467 1.025-1.472a.75.75 0 011.35.275zm4.64-.656a.75.75 0 01.75.75v2.193l.32-.318a.75.75 0 111.058 1.062l-1.592 1.587-.09.078a.728.728 0 01-.291.132l-.104.014h-.104a.747.747 0 01-.478-.219l-1.59-1.594a.75.75 0 111.063-1.059l.308.309V9.958a.75.75 0 01.75-.75z",fill:"currentcolor",fillRule:"evenodd"})))};var u;function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(null,arguments)}const d=function(e){return o.createElement("svg",s({width:"1em",height:"1em",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",className:"icon"},e),u||(u=o.createElement("path",{d:"M17 4a4 4 0 014 4v8a4 4 0 01-4 4H7a4 4 0 01-4-4V8a4 4 0 014-4h10zm-5.376 5.813c-.179-.86-1.299-1.088-1.8-.367l-.817 1.174-.796-1.167c-.497-.727-1.622-.505-1.805.356l-.85 4a1 1 0 00.77 1.186l.116.018a1 1 0 001.07-.788l.365-1.713.297.435.079.101a1 1 0 001.567-.094l.32-.461.36 1.728a1 1 0 001.958-.408l-.834-4zm4.396-.855a1 1 0 00-1 1v1.598a1 1 0 00-1.297 1.514l1.589 1.594.094.083a.996.996 0 00.553.209h.119a.999.999 0 00.651-.293l1.596-1.59a1 1 0 00-1.305-1.51V9.958a1 1 0 00-1-1z",fill:"currentcolor",fillRule:"evenodd"})))};var p=o.createElement,f=function(e){return p(l.Ay,(0,a.A)({},e,{IconPrimary:c,IconSecondary:d}))}},96878:(e,t,n)=>{n.d(t,{u:()=>A});var r=n(7527),a=n(75087),o=n(30395),l=n.n(o),i=n(22155),c=n(38638),u=n(16714),s=n(48831),d=n(23104),p=n(4177),f=n(81712),v=n(69321),m=n(96451),h=n(88663),g=n(48389),b=["imageSize","tag","user","className","disableTooltip","scrollingContainer","appendTooltipTo","children","afterContent","showDescription","transformUsername","showFollow","showSubscribe","copyType","origin","feedId"],y=i.createElement,w="py-3 px-6 hover:bg-surface-hover",x="flex-1",k=function(e,t){var n,o,i,k,A=e.imageSize,O=void 0===A?c.Ov.Large:A,C=e.tag,j=e.user,E=e.className,S=void 0===E?{}:E,N=e.disableTooltip,P=e.scrollingContainer,M=e.appendTooltipTo,I=e.children,D=e.afterContent,T=e.showDescription,z=void 0===T||T,R=e.transformUsername,L=e.showFollow,U=e.showSubscribe,H=e.copyType,q=e.origin,V=e.feedId,W=(0,a.A)(e,b),B=C||"a",K=j.name,F=j.username,_=j.bio,X=j.companies,J=j.isPlus,Y=j.role,$={appendTo:M||(null===globalThis||void 0===globalThis||null===(n=globalThis.document)||void 0===n?void 0:n.body)||"parent",visible:!N&&void 0};return y(B,(0,r.A)({ref:t},W,{className:l()("flex flex-row",null!==(o=S.container)&&void 0!==o?o:w)}),y(s.H,{userId:null==j?void 0:j.id,tooltip:$,scrollingContainer:P},y(c.Y3,{user:j,size:O,nativeLazyLoading:!0})),y(s.H,{userId:null==j?void 0:j.id,tooltip:$,scrollingContainer:P},y("div",{className:l()("ml-4 flex max-w-full flex-col overflow-auto typo-callout",null!==(i=S.textWrapper)&&void 0!==i?i:x)},y("div",{className:"flex items-center gap-1"},y(u.mE,{className:"font-bold typo-callout",title:K},K),J&&y(m.R,{user:{isPlus:J},tooltip:!1}),y(u.mE,{className:"text-text-tertiary typo-footnote",title:"@".concat(F)},R?R(j):"@".concat(F))),y("div",{className:"flex gap-2"},y(d.E,{user:j}),(null==X?void 0:X.length)>0&&y(p.m,{user:{companies:X}}),(0,g.cb)(Y)&&y(h.A,{role:Y},(0,u.mA)(Y))),_&&z&&y("span",{className:"text-text-tertiary typo-footnote"},_))),I,!!L&&y(v.W,{showSubscribe:U,entityId:j.id,type:f.ZD.User,status:null===(k=j.contentPreference)||void 0===k?void 0:k.status,entityName:"@".concat(j.username),origin:q,copyType:H,feedId:V}),y("div",{className:"z-1"},D))},A=(0,i.forwardRef)(k)},51722:(e,t,n)=>{n.d(t,{X:()=>s});var r=n(50122),a=n(75087),o=n(69918),l=n(36899),i=n(36180),c=["key"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.callback,s=t.enabled,d=void 0===s||s,p=(0,o.jE)();(0,i.x)((function(t){var o=t.key,i=(0,a.A)(t,c),s=Array.isArray(o)?o:[o];d&&(0,l.on)(s,e)&&(n?n(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({key:s},i)):p.setQueryData(e,i.res))}))}},36180:(e,t,n)=>{n.d(t,{x:()=>u});var r=n(50122),a=n(75087),o=n(22155),l=n(91201),i=["key"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var u=function(e){var t=(0,l.D)().isCompanion,u=(0,o.useState)(),s=u[0],d=u[1];(0,o.useEffect)((function(){t&&Promise.resolve().then(n.t.bind(n,83346,23)).then((function(e){return d(e.default)}))}),[t]),(0,o.useEffect)((function(){if(s){var t=function(t){var n=t.key,o=(0,a.A)(t,i);n&&e(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({key:n},o))};return s.runtime.onMessage.addListener(t),function(){s.runtime.onMessage.removeListener(t)}}}),[e,s])}},66007:(e,t,n)=>{n.d(t,{RS:()=>S,B1:()=>N});var r=n(98093),a=n(50122),o=n(89338),l=n(2827),i=n.n(l),c=n(22155),u=n(14243),s=n(3994),d=n(91201),p=n(80244),f=n(99604),v=n(68390),m=n(33318),h=function(e,t){var n=t.word,a=t.url,o=(0,r.A)(t.selection,1)[0],l=null!=a?a:"url",i=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"url";return"[".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"","](").concat(e,")")}(n,l);if(e===s.x1.Isolated){var c=o+1;return{replacement:i,offset:[c,c]}}var u=o+i.length-1;return{replacement:i,offset:[u-l.length,u]}},g=function(e){return function(t,n){var a=n.word,o=(0,r.A)(n.selection,1)[0],l="".concat(e).concat(a).concat(e);if(t===s.x1.Isolated){var i=o+e.length;return{replacement:l,offset:[i,i]}}return{replacement:l}}},b=function(e,t){var n=t.word,a=t.trailingChar,o=t.leadingChar,l=(0,r.A)(t.selection,1)[0],i="@".concat(n.trim());if(e===s.x1.Isolated)return{replacement:i};if(e===s.x1.Adjacent)return"@"===n.charAt(0)?{replacement:"".concat(n," @")}:{replacement:i};var c=(0,s.Jy)(a),u=(0,s.Jy)(o),d=l+(c?1:2),p=[d,d+i.length-(u?0:1)],f=u?"":" ";return{replacement:"".concat(c?"":" ").concat(i).concat(f),offset:p}},y=n(42104),w=n(55059),x=function(e){return e.Failed="failed",e.Ok="ok",e}({}),k=function(e){var t=e.onStarted,n=e.onFinish,r=(0,c.useRef)([]),a=(0,c.useState)(0),l=a[0],u=a[1],s=(0,c.useState)(0),d=s[0],p=s[1],f=function e(a){(0,w.Ie)(a,t).then((function(e){return n(x.Ok,a,e)})).catch((function(){return n(x.Failed,a)})).finally((0,o.A)(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,v.dY)();case 2:if(r.current.length){t.next=6;break}return p(0),u(0),t.abrupt("return");case 6:p(d+1),e(r.current.pop());case 8:case"end":return t.stop()}}),t)}))))};return{queueCount:l,uploadedCount:d,pushUpload:function(e){r.current.push(e)},startUploading:function(){r.current.length&&(u(r.current.length),l||f(r.current.pop()))}}},A=n(68392),O=n(70591);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=function(e){return e.Upload="upload",e.Link="link",e.Mention="mention",e}({}),S={link:!0,mention:!0},N=function(e){var t=e.textareaRef,n=e.postId,a=e.sourceId,l=e.onSubmit,C=e.onValueUpdate,S=e.initialContent,N=void 0===S?"":S,P=e.enabledCommand,M=void 0===P?{}:P,I=(0,c.useRef)(!1),D=null==t?void 0:t.current,T=M[E.Link],z=M[E.Upload],R=M[E.Mention],L=(0,c.useState)(),U=L[0],H=L[1],q=(0,c.useState)(N),V=q[0],W=q[1],B=(0,c.useState)(void 0),K=B[0],F=B[1],_=(0,c.useState)([0,0]),X=_[0],J=_[1],Y=(0,c.useState)(0),$=Y[0],Q=Y[1],Z=(0,d.D)().requestMethod,G=["user",K,n,a],ee=(0,p.Z2)().user,te=(0,A.mu)().displayToast;(0,c.useEffect)((function(){I.current||0===(null==V?void 0:V.length)&&(null==N?void 0:N.length)>0&&W(N)}),[V,N]);var ne,re,ae=function(e){I.current||(I.current=!0),W(e),C&&C(e)},oe=k({onStarted:(re=(0,o.A)(i().mark((function e(t){var n,r,a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s.cu)(t.name),r=function(e,t){var r=t.trailingChar;return{replacement:"".concat(r?"\n\n":"").concat(n,"\n\n")}},a=(0,s.pK)(D),o=a===s.x1.Adjacent?s.x1.Isolated:a,e.next=6,U.replaceWord(r,ae,o);case 6:case"end":return e.stop()}}),e)}))),function(e){return re.apply(this,arguments)}),onFinish:(ne=(0,o.A)(i().mark((function e(t,n,r){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==x.Failed){e.next=2;break}return e.abrupt("return",te(w.jM));case 2:return e.abrupt("return",ae(U.onReplaceUpload(r,n.name)));case 3:case"end":return e.stop()}}),e)}))),function(e,t,n){return ne.apply(this,arguments)})}),le=oe.uploadedCount,ie=oe.queueCount,ce=oe.pushUpload,ue=oe.startUploading;(0,c.useEffect)((function(){null!=t&&t.current&&H(new s.mc(t))}),[H,t]);var se=(0,u.I)({queryKey:G,queryFn:function(){return Z(f.EI,{postId:n,query:K,sourceId:a},{requestKey:JSON.stringify(G)})},enabled:!!ee&&void 0!==K,refetchOnWindowFocus:!1,refetchOnMount:!1}).data,de=void 0===se?{recommendedMentions:[]}:se,pe=null==de?void 0:de.recommendedMentions,fe=function(e){R&&e!==K&&((0,v.hX)(K)&&!(0,v.hX)(e)&&J((0,m.No)(D)),F(e))},ve=function(){var e=(0,o.A)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){return{replacement:"@".concat(t.username," ")}},e.next=3,U.replaceWord(n,ae,s.x1.Adjacent);case 3:fe(void 0);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),me=function(){return U.replaceWord(h,ae)},he=function(e){return U.replaceWord((function(t,n){return h(t,j(j({},n),{},{url:e}))}),ae)},ge=function(){var e=(0,o.A)(i().mark((function e(){var t,n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.replaceWord(b,ae);case 2:t=e.sent,n=t.replacement,r=n.trim().substring(1),fe(r);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(e){var t=[D.selectionStart,D.selectionEnd],n=null!=e?e:t,a=(0,s.Bw)(D,n),o=(0,r.A)(a,1)[0],l=o.substring(1);return"@"===o.charAt(0)&&(0===l.length||y.kY.test(l))?(0,v.hX)(K)?fe(null!=l?l:""):fe(l):fe(void 0)},ye=function(){var e=(0,o.A)(i().mark((function e(t){var n,r,a,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.ctrlKey||t.metaKey)){e.next=19;break}e.t0=t.key,e.next="b"===e.t0?5:"i"===e.t0?9:"k"===e.t0?13:18;break;case 5:return t.preventDefault(),e.next=8,U.replaceWord(g("**"),ae);case 8:case 12:case 17:return e.abrupt("return",e.sent);case 9:return t.preventDefault(),e.next=12,U.replaceWord(g("_"),ae);case 13:return t.preventDefault(),t.stopPropagation(),e.next=17,null==me?void 0:me();case 18:return e.abrupt("break",19);case 19:if(r=n&&t.key===m.Rc.Enter&&(null==V?void 0:V.length),!l||!r){e.next=22;break}return e.abrupt("return",l(t));case 22:if((t.key===m.Rc.Enter||m.Td.includes(t.key))&&null!=pe&&pe.length){e.next=25;break}return e.abrupt("return",t.stopPropagation());case 25:if(t.preventDefault(),a=t.key,m.Td.includes(t.key)&&(a===m.tg.Up?$>0&&Q($-1):$<pe.length-1&&Q($+1)),!(o=pe[$])||t.key!==m.Rc.Enter){e.next=32;break}return e.next=32,ve(o);case 32:return e.abrupt("return",null);case 33:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(e){var t=w.zN.includes(e.type);e.size>w.AB||!t?te(w.jM):ce(e)},xe=function(){var e=(0,o.A)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),(n=t.dataTransfer.files).length&&z){e.next=4;break}return e.abrupt("return");case 4:Array.from(n).forEach(we),ue();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=(0,o.A)(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.clipboardData.getData("text"),!(0,O.U8)(r)){e.next=8;break}if((0,s.pK)(D)!==s.x1.Highlighted){e.next=8;break}return t.preventDefault(),e.next=7,he(r);case 7:return e.abrupt("return");case 8:null!==(n=t.clipboardData.files)&&void 0!==n&&n.length&&z&&(t.preventDefault(),Array.from(t.clipboardData.files).forEach(we),ue());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ae=(0,c.useCallback)((function(){return F(void 0)}),[]),Oe=z?{onDrop:xe,onPaste:ke}:{},Ce=z?{uploadedCount:le,uploadingCount:ie,onUploadCommand:function(e){Array.from(e).forEach(we),ue()}}:{uploadedCount:0,uploadingCount:0},je=(0,c.useMemo)((function(){var e;return null!==(e=null==de?void 0:de.recommendedMentions)&&void 0!==e?e:[]}),[de]),Ee=R?{query:K,offset:X,selected:$,checkMention:be,onCloseMention:Ae,onMentionCommand:ge,onApplyMention:ve,mentions:je}:{};return j(j(j({},Ce),Ee),{},{input:V,onLinkCommand:T?me:null,callbacks:j({onInput:function(e){var t=e.currentTarget;t&&(ae(t.value),be())},onKeyUp:function(e){var t=e.key;if(m.Uq.includes(t)&&(!m.Td.includes(t)||null==pe||!pe.length)){var n=e.currentTarget,r=n.selectionStart,a=n.selectionEnd;be([r,a])}},onKeyDown:ye,onPaste:ke},Oe)})}},10715:(e,t,n)=>{n.d(t,{t:()=>i});var r=n(22155),a=n(69918),o=n(41431),l=[(0,o.S1)(o.Vg.Popup,"selector")],i=function(){var e,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).parentSelector,n=(0,a.jE)(),o=(null!==(e=n.getQueryData(l))&&void 0!==e?e:{}).parentSelector;return(0,r.useEffect)((function(){return function(){n.setQueryData(l,(function(){return{parentSelector:null}}))}}),[n]),{parentSelector:(0,r.useMemo)((function(){return null!=o?o:t}),[o,t]),onAppendTooltipTo:(0,r.useCallback)((function(e){return n.setQueryData(l,(function(){return{parentSelector:e}}))}),[n])}}},3994:(e,t,n)=>{n.d(t,{Bw:()=>m,Jy:()=>d,T5:()=>v,cu:()=>b,mc:()=>y,pK:()=>g,x1:()=>h});var r=n(52304),a=n(91886),o=n(50122),l=n(89338),i=n(98093),c=n(2827),u=n.n(c),s=n(68390),d=function(e){return!e||" "===e||"\n"===e},p=function(e){var t=[e.selectionStart,e.selectionEnd],n=t[0],r=t[1],a=n===r?n+1:r;return[e.value.substring(n,a),e.value[n-1],e.value[n-1]]},f=function(e,t,n){var r,a,o,l,c,u=(r=e.value,a=t,o=(0,i.A)(a,2),l=o[0],c=o[1],[r.substring(0,l),r.substring(c)]),s=(0,i.A)(u,2);return s[0]+n+s[1]},v=function(){var e=(0,l.A)(u().mark((function e(t,n){var r,a,o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,i.A)(n,2),a=r[0],o=r[1],t.focus(),e.next=4,(0,s.dY)();case 4:t.selectionStart=a,t.selectionEnd=o;case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(e,t){var n=(0,i.A)(t,2)[1],r=e.value.substring(0,n).split("\n").length-1,a=e.value.split("\n"),o=a[r],l=a.slice(0,r).join("\n"),c=0===r?0:1,u=n-l.length-c,s=0,d=0,p=o.split(" ").find((function(e){d=s;var t=s+e.length;return t>=u||(s=t+1,!1)}));return[null!=p?p:"",l.length+d+c]},h=function(e){return e.Isolated="isolated",e.Adjacent="adjacent",e.Highlighted="highlighted",e}({}),g=function(e){var t=[e.selectionStart,e.selectionEnd],n=t[0],r=t[1],a=p(e),o=(0,i.A)(a,2),l=o[0],c=o[1];return d(l)&&d(c)?h.Isolated:n!==r?h.Highlighted:h.Adjacent},b=function(e){return"![".concat(e,"]()")},y=function(){function e(t){var n=this;(0,r.A)(this,e),(0,o.A)(this,"getIsolatedReplacement",(function(e){var t=n.textarea.selectionStart,r=[t,t],a=e(h.Isolated,{word:"",selection:r,trailingChar:n.textarea.value[t-1],leadingChar:n.textarea.value[t+1]}),o=a.replacement,l=a.offset,i=f(n.textarea,r,o),c=t+o.length;return{result:i,position:null!=l?l:[c,c],replacement:o}})),(0,o.A)(this,"getAdjacentReplacement",(function(e){var t=[n.textarea.selectionStart,n.textarea.selectionEnd],r=m(n.textarea,t),a=(0,i.A)(r,2),o=a[0],l=a[1],c=[l,l+o.length],u=e(h.Adjacent,{word:o,selection:c}),s=u.replacement,d=u.offset,p=l+s.length;return{result:f(n.textarea,c,s),position:null!=d?d:[p,p],replacement:s}})),(0,o.A)(this,"getHighlightedReplacement",(function(e){var t=n.textarea.selectionStart,r=[t,n.textarea.selectionEnd],a=p(n.textarea),o=(0,i.A)(a,3),l=o[0],c=o[1],u=o[2],s=e(h.Highlighted,{word:l,trailingChar:c,leadingChar:u,selection:r}),d=s.replacement,v=s.offset,m=f(n.textarea,r,d),g=t+d.length;return{result:m,position:null!=v?v:[g,g],replacement:d}})),this.textareaRef=t}var t;return(0,a.A)(e,[{key:"textarea",get:function(){return this.textareaRef.current}},{key:"getResult",value:function(e,t){var n=null!=t?t:g(this.textarea);return n===h.Isolated?this.getIsolatedReplacement(e):n===h.Highlighted?this.getHighlightedReplacement(e):this.getAdjacentReplacement(e)}},{key:"replaceWord",value:(t=(0,l.A)(u().mark((function e(t,n,r){var a,o,l,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.getResult(t,r),o=a.result,l=a.position,i=a.replacement,n(o),e.next=4,v(this.textarea,l);case 4:return e.abrupt("return",{result:o,position:l,replacement:i});case 5:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"onReplaceUpload",value:function(e,t){var n=b(t),r=this.textarea.value.indexOf(n),a=t.split(".");a.pop();var o=[r,r+n.length],l=a.join("."),i="![".concat(l,"](").concat(e,")");return f(this.textarea,o,i)}}]),e}()}}]);