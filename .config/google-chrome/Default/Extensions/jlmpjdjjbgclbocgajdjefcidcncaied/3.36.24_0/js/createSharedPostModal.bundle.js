"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[3349],{92339:(e,t,n)=>{n.r(t),n.d(t,{CreateSharedPostModal:()=>A,default:()=>j});var r=n(7527),o=n(98093),a=n(75087),i=n(22155),s=n(94198),u=n(24481),l=n(63606),c=n(92975),d=n(78515),p=n(53823),f=n(83448),m=n(19505),v=n(99277),h=n(52303),b=n(16714),y=n(58392),w=n(17398),g=n(10663),P=n(57434),S=n(68334),x=n(38638),O=["preview","squad","onSharedSuccessfully","onRequestClose"],k=i.createElement;function A(e){var t,n,A,j=e.preview,N=e.squad,E=e.onSharedSuccessfully,C=e.onRequestClose,F=(0,a.A)(e,O),D=(0,i.useRef)(),I=(0,i.useState)(null!==(t=null!==(n=null==j?void 0:j.permalink)&&void 0!==n?n:null==j?void 0:j.url)&&void 0!==t?t:""),M=I[0],q=I[1],L=(0,P.$)(),T=L.shouldShowCta,_=L.isEnabled,U=L.onToggle,z=L.onSubmitted,R=function(){null==E||E(),z(),C(null)},X=(0,d.h)({initialPreview:j,onPostSuccess:R,onSourcePostModerationSuccess:R}),Y=X.getLinkPreview,$=X.isLoadingPreview,G=X.preview,W=X.isPosting,B=X.onSubmitPost,H=[null==G?void 0:G.url,null==G?void 0:G.permalink],K=(0,g.U)(Y,(function(e){return H.every((function(t){return t!==e}))})),J=(0,o.A)(K,1)[0],Q=k(i.Fragment,null,k(p.$n,{icon:k(v.X,null),size:f.Mp.Small,variant:f.Ak.Tertiary,onClick:null==D||null===(A=D.current)||void 0===A?void 0:A.onMentionCommand}),k(h.c,{vertical:!0}),k(y.A,{source:N,size:x.Ov.Small}),k("span",{className:"-ml-1 flex-1"},k("strong",null,N.name),k("span",{className:"ml-1 text-text-tertiary"},"@",N.handle))),Z={color:m.h.Cabbage,variant:f.Ak.Primary,disabled:W,loading:W};return k(s.aF,(0,r.A)({kind:s.aF.Kind.FlexibleCenter,size:s.aF.Size.Medium,onRequestClose:C},F,{formProps:{form:"share_post",title:"New post",rightButtonProps:Z,copy:{right:"Post"}}}),k(s.aF.Header,{title:"New post"}),k("form",{className:"flex w-full flex-col p-3",action:"#",onSubmit:function(e){e.preventDefault();var t=(0,w.Y)(e.currentTarget).commentary;return B(e,N,t)},id:"share_post"},k(u.A,{ref:D,showUserAvatar:!0,textareaProps:{rows:5,name:"commentary"},sourceId:null==N?void 0:N.id,allowPreview:!1,enabledCommand:{mention:!0},footer:$?k(l.j,{link:M,className:"m-3 flex-col-reverse"}):k(c.A,{className:"m-3 !w-auto flex-col-reverse",preview:null!=G?G:j,link:M,onLinkChange:function(e){var t=e.currentTarget.value;q(t),J(t)}})}),T&&k(S.d,{"data-testid":"push_notification-switch",inputId:"push_notification-switch",name:"push_notification",labelClassName:"flex-1 font-normal",className:"py-3",compact:!1,checked:_,onToggle:U},"Receive updates whenever your Squad members engage with your post")),k("span",{className:"flex flex-row items-center gap-2 px-4 tablet:hidden"},Q),k(s.aF.Footer,{className:"typo-caption1",justify:b.F1.Start},Q,k(p.$n,(0,r.A)({},Z,{className:"ml-auto",form:"share_post"}),"Post")))}const j=A},92975:(e,t,n)=>{n.d(t,{A:()=>m});var r=n(22155),o=n(43660),a=n(26540),i=n(75240),s=n(69069),u=n(41536),l=n(75737),c=n(53823),d=n(83448),p=n(38638),f=r.createElement;function m(e){var t,n,r=e.link,m=e.preview,v=e.onLinkChange,h=e.className,b=e.isMinimized,y=e.showPreviewLink,w=void 0===y||y;return f(l.rA,{className:h},w&&f(o.A,{leftIcon:f(a.q,null),label:"URL",type:"url",name:"url",inputId:"preview_url",fieldType:"tertiary",className:{container:"w-full"},value:r,onInput:v}),m.title&&m.image&&f(l.rP,{className:b&&"!px-3 !py-2"},f("div",{className:"flex flex-1 flex-col typo-footnote"},f("span",{className:"line-clamp-2 font-bold"},m.title),"unknown"!==(null===(t=m.source)||void 0===t?void 0:t.id)&&(b?f(s.J,{size:p.Ov.Small,source:m.source,className:"absolute right-24 mr-4 mt-1"}):f("span",{className:"mt-1 flex flex-row items-center"},f(s.J,{size:p.Ov.Small,source:m.source}),f("span",{className:"text-text-tertiary"},null===(n=m.source)||void 0===n?void 0:n.name)))),f(u._V,{className:l.Gs,src:m.image,alt:"".concat(m.title)}),!b&&f(c.$n,{icon:f(i.S,null),variant:d.Ak.Tertiary,type:"button",tag:"a",target:"_blank",rel:"noopener noreferrer",href:r})))}},63606:(e,t,n)=>{n.d(t,{j:()=>p});var r=n(22155),o=n(43660),a=n(30794),i=n(9062),s=n(75240),u=n(75737),l=n(53823),c=n(83448),d=r.createElement;function p(e){var t=e.link,n=e.className;return d(u.rA,{className:n},d(o.A,{leftIcon:d(a.a,{className:"mr-2"}),label:"URL",type:"url",inputId:"preview_url",fieldType:"tertiary",className:{container:"w-full"},value:t}),d(u.rP,null,d("span",{className:"absolute left-2 top-2 text-text-quaternary typo-caption1"},"Fetching preview, please hold..."),d("div",{className:"flex flex-1 flex-col typo-footnote"},d("div",{className:"flex-flex-col relative"},d(i._,{className:"h-2 w-5/6 rounded-12"}),d(i._,{className:"mt-3 h-2 w-1/2 rounded-12"}))),d("div",{className:u.Gs}),d(l.$n,{variant:c.Ak.Tertiary,icon:d(s.S,null),disabled:!0,type:"button",tag:"a",target:"_blank",rel:"noopener noreferrer",href:t})))}},75737:(e,t,n)=>{n.d(t,{Gs:()=>a,rA:()=>i,rP:()=>s});var r=n(63423),o=n(16714),a="w-28 h-16 rounded-12 bg-text-disabled object-cover",i=(0,r.A)(o.wt,"rounded-16 border border-border-subtlest-tertiary"),s=(0,r.A)(o.Ye,"relative gap-3 items-center py-5 px-4")},7186:(e,t,n)=>{n.d(t,{$d:()=>h,D4:()=>w,Eh:()=>y,jG:()=>g,wF:()=>b});var r=n(50122),o=n(22155),a=n(63423),i=n(67380),s=n(16714),u=n(87822),l=n(48191),c=n(97838),d=n(77955),p=n(48389),f=o.createElement;function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(e){var t=e.children,n=e.className;return f(i.o5,{className:n,tag:i.UL.H1,type:i.kR.LargeTitle,bold:!0},t)},b=(0,a.A)("span","text-brand-default"),y=((0,a.A)(s.mf,"!p-0 laptop:min-h-page h-full !max-w-[42.5rem] !w-full",s.hC),(0,a.A)("div","flex flex-1 flex-col"),function(e){return(null==e?void 0:e.moderationRequired)&&!(0,p.pZ)(e,u.Wk.ModeratePost)}),w={title:"Your post has been submitted for review",description:"Your post is now waiting for the admin's approval. We'll notify you once it's been reviewed.",okButton:{title:"Got it",className:"tablet:w-full"},cancelButton:null,promptSize:d.rI.XSmall,icon:f(l.x,{size:c.lK.XXXLarge})},g=v(v({},w),{},{title:"Your edit has been submitted for review",description:"Your edit is now waiting for the admin’s approval. We’ll notify you once it’s been reviewed."})},10663:(e,t,n)=>{n.d(t,{U:()=>a});var r=n(34229),o=n(70591),a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;return(0,r.A)((function(n){return(0,o.U8)(n)&&t(n)?e(n):null}),n)}},57434:(e,t,n)=>{n.d(t,{$:()=>l});var r=n(89338),o=n(2827),a=n.n(o),i=n(22155),s=n(57952),u=n(35393),l=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).source,t=void 0===e?s.vH.SquadPostCommentary:e,n=(0,i.useState)(!0),o=n[0],l=n[1],c=(0,u.W)({source:t}),d=c.shouldShowCta,p=c.onEnable,f=c.onDismiss,m=function(){var e=(0,r.A)(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=2;break}return e.abrupt("return");case 2:return t=o?p:f,e.next=5,t();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=(0,i.useCallback)((function(){return l((function(e){return!e}))}),[]);return{isEnabled:o,onToggle:v,shouldShowCta:d,onSubmitted:m}}},86735:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(89338),o=n(2827),a=n.n(o),i=n(5947),s=n(55059),u=n(27840),l=n(7186);const c=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.onSuccess,c=n.onError,d=n.onSettled,p=n.onMutate,f=(0,u.k)().showPrompt,m=(0,i.n)({mutationFn:s.o8,onSuccess:(e=(0,r.A)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(t.post?l.jG:l.D4);case 2:null==o||o(t);case 3:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),onError:c,onSettled:d,onMutate:p}),v=m.mutateAsync,h=m.isPending,b=m.isSuccess,y=(0,i.n)({mutationFn:s.$Y,onSuccess:(t=(0,r.A)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(l.jG);case 2:null==o||o(t);case 3:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),onError:c,onSettled:d,onMutate:p}),w=y.mutateAsync,g=y.isPending,P=y.isSuccess;return{onCreatePostModeration:v,onUpdatePostModeration:w,isPending:h||g,isSuccess:b||P}}},78515:(e,t,n)=>{n.d(t,{h:()=>S});var r=n(89338),o=n(50122),a=n(2827),i=n.n(a),s=n(69918),u=n(5947),l=n(22155),c=n(55059),d=n(36899),p=n(68392),f=n(48389),m=n(71623),v=n(80244),h=n(9495),b=n(91201),y=n(86735),w=n(7186);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onPostSuccess,n=e.onMutate,o=e.onError,a=e.onExternalLinkSuccess,g=e.onSourcePostModerationSuccess,S=e.initialPreview,x=(0,p.mu)().displayToast,O=(0,v.Z2)().user,k=(0,s.jE)(),A=(0,h.d)().completeAction,j=(0,l.useState)(S),N=j[0],E=j[1],C=(0,b.D)().requestMethod,F=(0,u.n)({mutationFn:c.pD,onMutate:n,onError:o,onSuccess:t}),D=F.mutateAsync,I=F.isPending,M=F.isSuccess,q=(0,u.n)({mutationFn:c.lD,onMutate:n,onSuccess:t,onError:o}),L=q.mutateAsync,T=q.isPending,_=q.isSuccess,U=(0,u.n)({mutationFn:function(e){return(0,c.e_)(e,C)},onSuccess:function(e,t){E(P(P({},e),{},{url:t})),null==a||a(e,t)},onError:function(e){var t,n=(0,d.Pd)(e,d.hD.RateLimited),r=null!==(t=null==n?void 0:n.message)&&void 0!==t?t:d.XW;x(r),null==o||o(e)}}),z=U.mutateAsync,R=U.isPending,X=(0,y.A)({onSuccess:function(e){A(m.X2.SquadFirstPost),null==g||g(e)},onError:function(){x(d.XW)}}),Y=X.onCreatePostModeration,$=X.isSuccess,G=X.isPending,W=(0,l.useCallback)(function(){var e=(0,r.A)(i().mark((function e(t,n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T&&!_){e.next=2;break}return e.abrupt("return",null);case 2:return(0,w.Eh)(n)?Y(P(P({},t),{},{type:c.xj.Freeform,postId:t.id,sourceId:n.id})):L(t),e.abrupt("return",null);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[L,Y,T,_]),B=function(){var e=(0,r.A)(i().mark((function e(){var t=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(t.length>0&&void 0!==t[0]&&t[0]?"The post has been updated":"This post has been shared to your squad"),e.next=4,k.invalidateQueries({queryKey:["sourceFeed",O.id]});case 4:A(m.X2.SquadFirstPost);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=(0,u.n)({mutationFn:(0,f.DC)(C),onSuccess:function(e){B(),t&&t(e,null==e?void 0:e.permalink)}}),K=H.mutateAsync,J=H.isPending,Q=H.isSuccess,Z=(0,u.n)({mutationFn:(0,f.Qz)(C),onSuccess:function(e){B(!0),t&&t(e,null==e?void 0:e.permalink)}}),V=Z.mutateAsync,ee=Z.isPending,te=Z.isSuccess,ne=(0,u.n)({mutationFn:function(e){return(0,c.w)(e,C)},onSuccess:function(e,n){var r=n.url;B(),t&&t(null,r)}}),re=ne.mutateAsync,oe=ne.isPending,ae=ne.isSuccess,ie=J||oe||G||T||I,se=te||ee||G,ue=$||Q||ae||M||_,le=(0,l.useCallback)((function(e,t,n){if(null==e||e.preventDefault(),ie)return null;if(N.id)return(0,w.Eh)(t)?Y({type:c.xj.Share,sourceId:t.id,sharedPostId:N.id,title:n}):K({id:N.id,sourceId:t.id,commentary:n});var r=N.title,o=N.image,a=N.url;return r?(0,w.Eh)(t)?Y({externalLink:a,title:r,imageUrl:o,type:c.xj.Share,sourceId:t.id,content:n}):re({url:a,title:r,image:o,sourceId:t.id,commentary:n}):(x("Invalid link"),null)}),[N,x,re,K,ie,Y]),ce=(0,l.useCallback)((function(e,t,n,r){return e.preventDefault(),se?null:(0,w.Eh)(r)?Y({postId:t,type:c.xj.Share,sourceId:r.id,title:n}):V({id:t,commentary:n})}),[V,se,Y]),de=(0,l.useCallback)((function(e,t){return(0,w.Eh)(t)?Y(P(P({},e),{},{sourceId:t.id,type:c.xj.Freeform})):D(P(P({},e),{},{sourceId:t.id})),null}),[D,Y]);return{isLoadingPreview:R,getLinkPreview:z,onSubmitPost:le,onUpdateSharePost:ce,isPosting:ie,onEditFreeformPost:W,preview:N,isSuccess:ue,onSubmitFreeformPost:de,onUpdatePreview:E}}},17398:(e,t,n)=>{n.d(t,{Y:()=>i});var r=n(50122);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){return Array.from(e.elements).reduce((function(e,t){return""===t.name?e:"checkbox"===t.type?a(a({},e),{},(0,r.A)({},t.name,t.checked)):"radio"!==t.type||t.checked?"file"===t.type?a(a({},e),{},(0,r.A)({},t.name,0===t.files.length?null:t.files)):a(a({},e),{},(0,r.A)({},t.name,t.value.length?t.value:null)):e}),t)}}}]);