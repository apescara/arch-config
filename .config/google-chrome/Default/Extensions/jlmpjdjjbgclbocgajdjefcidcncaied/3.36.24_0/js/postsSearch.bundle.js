"use strict";(self.webpackChunkextension=self.webpackChunkextension||[]).push([[9152],{84178:(e,n,t)=>{t.r(n),t.d(n,{default:()=>S});var r=t(98093),a=t(89338),o=t(2827),l=t.n(o),u=t(22155),i=t(36797),s=t.n(i),c=t(14243),d=t(30395),f=t.n(d),p=t(79887);var y=t(34229),h=t(4394),v=t(56638),m=t(42104),g=t(36899),b=t(15360),k=t(55551),C=u.createElement,I=s()((function(){return t.e(7286).then(t.bind(t,84746))}),{ssr:!1,loadableGenerated:{webpack:function(){return[84746]}}}),x={searchPostSuggestions:h.cy,searchBookmarksSuggestions:v.tC,searchReadingHistorySuggestions:m.P4};function S(e){var n=e.initialQuery,t=e.autoFocus,o=void 0===t||t,i=e.placeholder,s=e.onSubmitQuery,d=e.className,v=e.suggestionType,m=void 0===v?"searchPostSuggestions":v,S=e.onFocus,w=e.onClearQuery,F=(0,u.useRef)(),P=(0,u.useState)(),A=P[0],N=P[1],B=(0,u.useState)(),q=B[0],E=B[1],z=(0,u.useState)(null),T=z[0],K=z[1],R=(0,u.useState)([]),D=R[0],O=R[1],G=(0,b.G)({feature:k.N4.searchVersion,shouldEvaluate:!!q&&"searchPostSuggestions"===m}).value,Q=x[m],H=(0,c.I)({queryKey:[m,q],queryFn:function(){return g.e.request(Q,{query:q,version:G})},enabled:!!q}),L=H.data,M=H.isPending;(0,u.useEffect)((function(){A||N(n)}),[n]);var X=function(){return K(null)},$=function(){if(!T){var e=F.current.getBoundingClientRect(),n=e.left,t=e.bottom,r=e.width;K({x:n,y:t+window.scrollY,width:r})}};(0,u.useEffect)((function(){var e,n,t;M||(null!=D&&D.length||null==L||null===(e=L[m])||void 0===e||!e.hits.length||$(),O(null!==(n=null==L||null===(t=L[m])||void 0===t?void 0:t.hits.map((function(e){return e.title})))&&void 0!==n?n:[]))}),[L,M]);var J=function(){var e=(0,a.A)(l().mark((function e(n){var t,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null==n||null===(t=n.replace)||void 0===t?void 0:t.call(n,h.F,""),e.next=3,s(r||q);case 3:r&&N(r),X();case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),V=function(e,n){var t=(0,u.useState)(-1),r=t[0],a=t[1];return(0,u.useEffect)((function(){a(-1)}),[e]),{selectedItemIndex:r,onKeyDown:function(t){if(40===t.keyCode||38===t.keyCode){t.preventDefault();var o=e.length+1;if(r>-1){var l=40===t.keyCode?1:-1;a(((r+l)%o+o)%o)}else a(40===t.keyCode?0:o-1)}else 13===t.keyCode&&n(r>-1&&e[r])}}}(D,J),W=V.selectedItemIndex,Y=V.onKeyDown,j=(0,y.A)((function(e){return E(e)}),100),U=(0,r.A)(j,1)[0];(0,u.useEffect)((function(){var e;o&&(null===(e=F.current)||void 0===e||e.querySelector("input").focus())}),[F,o]);var Z=!!T&&!!D.length;return C(u.Fragment,null,C(p.L,{className:f()("compact flex-1",d),inputId:"posts-search",fieldSize:"medium",placeholder:null!=i?i:"Find posts",ref:F,value:A,valueChanged:function(e){if(!e.length)return X(),E(""),void(null==w||w());e&&e!==n&&U(e),null===T&&$()},onKeyDown:Y,onBlur:function(){null!=q&&q.length&&X()},onFocus:function(e){null==S||S(e),null!=D&&D.length&&$()},"aria-haspopup":"true","aria-expanded":Z}),C(I,{placement:T,items:D,focusedItemIndex:W,onItemClick:J,isOpen:Z}))}},79887:(e,n,t)=>{t.d(n,{L:()=>k});var r=t(7527),a=t(75087),o=t(22155),l=t(30395),u=t.n(l),i=t(95098),s=t(86548),c=t(67371),d=t(43918),f=t(96044),p=t(53823),y=t(83448),h=t(77501),v=["isPrimary"],m=["inputId","name","value","valueChanged","placeholder","fieldSize","readOnly","fieldType","className","autoFocus","type","disabled","rightButtonProps","aria-describedby","aria-label","onBlur","onFocus","showIcon"],g=o.createElement,b=function(e){var n=e.isPrimary,t=(0,a.A)(e,v);return n?g(c.d,t):g(d.HK,(0,r.A)({},t,{className:"rotate-90"}))},k=(0,o.forwardRef)((function(e,n){var t=e.inputId,o=e.name,l=e.value,d=e.valueChanged,v=e.placeholder,k=void 0===v?"Search":v,C=e.fieldSize,I=void 0===C?"large":C,x=e.readOnly,S=e.fieldType,w=void 0===S?"primary":S,F=e.className,P=e.autoFocus,A=e.type,N=e.disabled,B=e.rightButtonProps,q=void 0===B?{type:"button"}:B,E=e["aria-describedby"],z=e["aria-label"],T=e.onBlur,K=e.onFocus,R=e.showIcon,D=void 0===R||R,O=(0,a.A)(e,m),G=(0,i.G)(l,d),Q=G.inputRef,H=G.focused,L=G.hasInput,M=G.onFocus,X=G.onBlur,$=G.onInput,J=G.focusInput,V=G.setInput,W=function(e){e.stopPropagation(),V(null)},Y="primary"===w,j="secondary"===w,U="medium"===I?"h-10 rounded-12":"h-12 rounded-14";return g(s.s,(0,r.A)({},O,{className:u()("items-center !border !border-border-subtlest-tertiary !bg-background-default",U,F,{focused:H}),onClick:J,"data-testid":"searchField",ref:n}),!!D&&(j&&L?g(p.$n,{"aria-label":"Clear input text",className:"mr-2",size:y.Mp.XSmall,variant:y.Ak.Tertiary,title:"Clear query",onClick:W,icon:g(c.d,{className:"icon text-lg group-hover:text-text-primary"}),disabled:!L}):g(f.W,{"aria-hidden":!0,className:"icon mr-2 text-2xl",role:"presentation",secondary:H,style:{color:H||L?"var(--theme-text-primary)":"var(--field-placeholder-color)"}})),g(s.T,{"aria-label":z,disabled:N,placeholder:k,name:o,id:t,ref:Q,onFocus:function(e){M(),null==K||K(e)},onBlur:function(e){X(),null==T||T(e)},onInput:$,autoFocus:P,type:A,"aria-describedby":E,autoComplete:"off",className:u()("flex-1",U,(0,h.pJ)({readOnly:x,disabled:N,hasInput:L,focused:H})),required:!0}),(L&&Y||j)&&!!q&&g(p.$n,(0,r.A)({},q,{variant:j?y.Ak.Primary:y.Ak.Tertiary,size:q.size||y.Mp.XSmall,title:q.title||"Clear query",onClick:"submit"!==q.type?W:q.onClick,icon:g(b,{"aria-hidden":!0,role:"presentation",isPrimary:Y}),disabled:(null==q?void 0:q.disabled)||!L})))}))}}]);